% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sim_boin_multiple_trial.R
\name{sim_boin_multiple_trial}
\alias{sim_boin_multiple_trial}
\title{Run BOIN Simulation}
\usage{
sim_boin_multiple_trial(
  n_trials = 10000,
  target,
  p_true,
  n_doses,
  n_cohort,
  cohort_size,
  decision_table,
  stopping_boundaries,
  n_earlystop = 18,
  min_mtd_sample = 1,
  seed = 123
)
}
\arguments{
\item{n_trials}{Numeric. Number of trials to simulate. Default is 10000.
Typically 1000-10000 for detailed operating characteristics.}

\item{target}{Numeric. The target toxicity probability (e.g., 0.30 for 30\%).}

\item{p_true}{Numeric vector. True toxicity probabilities for each dose.
Length determines number of doses evaluated.}

\item{n_doses}{Numeric. Number of doses evaluated.}

\item{n_cohort}{Numeric. Maximum number of cohorts per trial.}

\item{cohort_size}{Numeric vector or scalar specifying patients per cohort.
If vector (e.g., c(4, 3, 3)), each element specifies size for corresponding cohort.
If scalar, all cohorts use the same size.}

\item{decision_table}{Character matrix. Decision table from \code{get_boin_decision()}.}

\item{stopping_boundaries}{Character matrix. Trial stopping rule table from \code{get_boin_stopping_boundaries()}.}

\item{n_earlystop}{Numeric. Sample size triggering early stopping. Default is 18.}

\item{min_mtd_sample}{Numeric. Minimum sample size for MTD consideration. Default is 6.}

\item{seed}{Numeric. Random seed for reproducibility. Default is 123.}

\item{lambda_e}{Numeric. Escalation boundary from \code{get_boin_boundary()}.}

\item{lambda_d}{Numeric. De-escalation boundary from \code{get_boin_boundary()}.}
}
\value{
A list containing:
\item{detailed_results}{List of results from each individual trial}
\item{summary}{Aggregated summary statistics from \code{summarize_simulation()}}
}
\description{
Execute multiple BOIN trial simulations and return aggregated operating
characteristics. This is the main entry point for running simulation studies
to evaluate BOIN design performance.
}
\details{
This function orchestrates the entire simulation workflow:
\enumerate{
\item Sets random seed for reproducibility
\item Runs n_trials independent trial simulations
\item Aggregates results into summary statistics
\item Returns both detailed and summary results
}

The detailed results allow for further custom analysis if needed.
Summary statistics include MTD selection rates, patient allocation,
and safety metrics needed for protocol development.
}
\examples{
\dontrun{
# Example: Simulation for 3-dose study with 30\% target DLT rate
target <- 0.30
p_true <- c(0.10, 0.25, 0.40)
boin_bound <- get_boin_boundary(target)
decision_table <- get_boin_decision(target, boin_bound$lambda_e,
                                boin_bound$lambda_d, 18, 0.95)
stopping_boundaries <- get_boin_stopping_boundaries(target, 18, 0.90)

result <- sim_boin_multiple_trial(
  n_trials = 1000,
  target = target,
  p_true = p_true,
  n_doses = 3,
  n_cohort = 10,
  cohort_size = 3,
  decision_table = decision_table,
  stopping_boundaries = stopping_boundaries,
  seed = 123
)
print_simulation_summary(result$summary, n_doses = 3)
}

}
\references{
Liu S. and Yuan, Y. (2015). Bayesian Optimal Interval Designs for Phase I Clinical
Trials. Journal of the Royal Statistical Society: Series C, 64, 507-523.
}
