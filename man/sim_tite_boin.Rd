% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sim_tite_boin.R
\name{sim_tite_boin}
\alias{sim_tite_boin}
\title{Run TITE-BOIN Simulation}
\usage{
sim_tite_boin(
  n_trials = 1000,
  target,
  p_true,
  n_doses,
  n_cohort,
  cohort_size,
  lambda_e,
  lambda_d,
  stopping_boundaries,
  accrual_rate = 1,
  assessment_window = 28,
  alpha1 = 0.5,
  alpha2 = 0.5,
  distribution = "weibull",
  n_earlystop = 18,
  min_mtd_sample = 1,
  cutoff_eli = 0.95,
  seed = 123
)
}
\arguments{
\item{n_trials}{Numeric. Number of trials to simulate. Default is 1000.
Typically 1000-10000 for detailed operating characteristics.}

\item{target}{Numeric. The target toxicity probability (e.g., 0.30 for 30\%).}

\item{p_true}{Numeric vector. True toxicity probabilities for each dose.
Length determines number of doses evaluated.}

\item{n_doses}{Numeric. Number of doses evaluated.}

\item{n_cohort}{Numeric. Maximum number of cohorts per trial.}

\item{cohort_size}{Numeric. Number of patients per cohort (scalar only for TITE-BOIN).}

\item{lambda_e}{Numeric. Escalation boundary from \code{get_boin_boundary()}.}

\item{lambda_d}{Numeric. De-escalation boundary from \code{get_boin_boundary()}.}

\item{stopping_boundaries}{Character matrix. Trial stopping rule table from
\code{get_boin_stopping_boundaries()}.}

\item{accrual_rate}{Numeric. Patient accrual rate (patients per time unit).
For example, if assessment_window = 28 days and accrual_rate = 1,
then 1 patient is enrolled every 28 days. Default is 1.}

\item{assessment_window}{Numeric. Length of the DLT assessment window
(e.g., 28 days). Default is 28.}

\item{alpha1}{Numeric. Late-onset parameter (0 < alpha1 < 1). Represents the
proportion of toxicity that occurs in the last fraction (alpha2) of the
assessment window. Default is 0.5.}

\item{alpha2}{Numeric. Weibull shape parameter (0 < alpha2 < 1). Defines the
last fraction of the assessment window where alpha1 proportion of toxicity
occurs. Default is 0.5.}

\item{distribution}{Character. Distribution for time-to-toxicity.
One of "weibull" (default), "log-logistic", or "uniform".}

\item{n_earlystop}{Numeric. Sample size triggering early stopping check. Default is 18.}

\item{min_mtd_sample}{Numeric. Minimum sample size for MTD consideration. Default is 6.}

\item{cutoff_eli}{Numeric. Cutoff probability for dose elimination. Default is 0.95.}

\item{seed}{Numeric. Random seed for reproducibility. Default is 123.}
}
\value{
A list containing:
\item{detailed_results}{List of results from each individual trial}
\item{summary}{Aggregated summary statistics including:
\itemize{
\item mtd_selection_percent: Percentage of trials selecting each dose as MTD
\item avg_n_pts: Average number of patients treated at each dose
\item avg_n_tox: Average number of DLTs at each dose
\item percent_no_mtd: Percentage of trials where no MTD was selected
\item avg_total_n_pts: Average total patients across all doses
\item avg_total_n_tox: Average total DLTs across all doses
\item avg_trial_duration: Average trial duration in time units
}
}
}
\description{
Execute multiple TITE-BOIN (Time-to-Event Bayesian Optimal Interval) trial
simulations and return aggregated operating characteristics. This function
implements the approximated likelihood method from Lin and Yuan (2020),
which uses Effective Sample Size (ESS) for decision making.
}
\details{
This function orchestrates the entire TITE-BOIN simulation workflow:
\enumerate{
\item Sets random seed for reproducibility
\item Runs n_trials independent trial simulations
\item Aggregates results into comprehensive summary statistics
\item Returns both detailed trial-level results and summary statistics
}

The TITE-BOIN design uses ESS (Effective Sample Size) to account for pending
patients with incomplete follow-up. Decision making is based on comparing the
ESS-adjusted toxicity rate with BOIN boundaries (lambda_e and lambda_d), without
requiring pre-computed decision tables. This is the key advantage of the
Lin and Yuan (2020) approach.

Progress is reported at 10 intervals during execution to monitor simulation status.
}
\examples{
\dontrun{
# Example 1: Basic 3-dose TITE-BOIN study with 30\% target DLT rate
target <- 0.30
p_true <- c(0.10, 0.25, 0.40)
boin_bound <- get_boin_boundary(target)
stopping_boundaries <- get_boin_stopping_boundaries(
  target = target,
  max_sample_size = 18,
  cutoff_stop = 0.90
)

result <- sim_tite_boin(
  n_trials = 1000,
  target = target,
  p_true = p_true,
  n_doses = 3,
  n_cohort = 10,
  cohort_size = 3,
  lambda_e = boin_bound$lambda_e,
  lambda_d = boin_bound$lambda_d,
  stopping_boundaries = stopping_boundaries,
  accrual_rate = 2,
  assessment_window = 28,
  seed = 123
)

# Display summary statistics
print(result$summary)
}

}
\references{
Lin, R., & Yuan, Y. (2020). Time-to-event model-assisted designs for
dose-finding trials with delayed toxicity. \emph{Biostatistics}, 21(4), 807-824.

Yuan, Y., Lin, R., Li, D., Nie, L., & Warren, K. E. (2018).
Time-to-Event Bayesian Optimal Interval Design to Accelerate Phase I Trials.
\emph{Clinical Cancer Research}, 24(20), 4921-4930.
}
